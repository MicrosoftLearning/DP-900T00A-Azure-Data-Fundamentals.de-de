---
ms.openlocfilehash: 7a40bb5c1f9bdc59490cf2a2dbf591d14b488b41
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051368"
---
# <a name="form-data-npm-modulehttpswwwnpmjscompackageform-data-join-the-chat-at-httpsgitterimform-dataform-datahttpsgitterimform-dataform-data"></a>Form-Data [![NPM-Modul](https://img.shields.io/npm/v/form-data.svg)](https://www.npmjs.com/package/form-data) [![Am Chat teilnehmen unter https://gitter.im/form-data/form-data](http://form-data.github.io/images/gitterbadge.svg)](https://gitter.im/form-data/form-data)

Eine Bibliothek zum Erstellen lesbarer ```"multipart/form-data"```-Datenströme. Kann verwendet werden, um Formulare und Dateiuploads an andere Webanwendungen zu übermitteln.

Die API dieser Bibliothek ist angelehnt an die [Schnittstelle „XMLHttpRequest-2 FormData“][xhr2-fd].

[xhr2-fd]: http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#the-formdata-interface

[![Linux-Build](https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=linux:6.x-12.x)](https://travis-ci.org/form-data/form-data)
[![MacOS-Build](https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=macos:6.x-12.x)](https://travis-ci.org/form-data/form-data)
[![Windows-Build](https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=windows:6.x-12.x)](https://travis-ci.org/form-data/form-data)

[![Coveragestatus](https://img.shields.io/coveralls/form-data/form-data/v3.0.1.svg?label=code+coverage)](https://coveralls.io/github/form-data/form-data?branch=master)
[![Abhängigkeitsstatus](https://img.shields.io/david/form-data/form-data.svg)](https://david-dm.org/form-data/form-data)

## <a name="install"></a>Installieren

```
npm install --save form-data
```

## <a name="usage"></a>Verbrauch

In diesem Beispiel erstellen wir ein Formular mit 3 Feldern, die eine Zeichenfolge, einen Puffer und einen Dateidatenstrom enthalten.

``` javascript
var FormData = require('form-data');
var fs = require('fs');

var form = new FormData();
form.append('my_field', 'my value');
form.append('my_buffer', new Buffer(10));
form.append('my_file', fs.createReadStream('/foo/bar.jpg'));
```

Sie können auch den „http-response“-Datenstrom verwenden:

``` javascript
var FormData = require('form-data');
var http = require('http');

var form = new FormData();

http.request('http://nodejs.org/images/logo.png', function(response) {
  form.append('my_field', 'my value');
  form.append('my_buffer', new Buffer(10));
  form.append('my_logo', response);
});
```

Oder den [request](https://github.com/request/request)-Datenstrom von @mikeal:

``` javascript
var FormData = require('form-data');
var request = require('request');

var form = new FormData();

form.append('my_field', 'my value');
form.append('my_buffer', new Buffer(10));
form.append('my_logo', request('http://nodejs.org/images/logo.png'));
```

Zur Übermittlung dieses Formulars an eine Webanwendung rufen Sie die Methode ```submit(url, [callback])``` auf:

``` javascript
form.submit('http://example.org/', function(err, res) {
  // res – response object (http.IncomingMessage)  //
  res.resume();
});

```

Bei erweiterten Anforderungsbearbeitungen gibt die Methode ```submit()``` das Objekt ```http.ClientRequest``` zurück, oder Sie können aus einer der alternativen Übermittlungsmethoden auswählen.

### <a name="custom-options"></a>Benutzerdefinierte Optionen

Sie können benutzerdefinierte Optionen bereitstellen, z. B. `maxDataSize`:

``` javascript
var FormData = require('form-data');

var form = new FormData({ maxDataSize: 20971520 });
form.append('my_field', 'my value');
form.append('my_buffer', /* something big */);
```

Eine Liste der verfügbaren Optionen finden Sie im kombinierten Datenstrom [combined-stream](https://github.com/felixge/node-combined-stream/blob/master/lib/combined_stream.js#L7-L15).

### <a name="alternative-submission-methods"></a>Alternative Übermittlungsmethoden

Sie können die HTTP-Clientschnittstelle des Knotens verwenden:

``` javascript
var http = require('http');

var request = http.request({
  method: 'post',
  host: 'example.org',
  path: '/upload',
  headers: form.getHeaders()
});

form.pipe(request);

request.on('response', function(res) {
  console.log(res.statusCode);
});
```

Oder wenn Sie möchten, dass der Header `'Content-Length'` automatisch festgelegt wird:

``` javascript
form.submit('example.org/upload', function(err, res) {
  console.log(res.statusCode);
});
```

So verwenden Sie benutzerdefinierte Header und eine bereits bekannte Länge in Teilen:

``` javascript
var CRLF = '\r\n';
var form = new FormData();

var options = {
  header: CRLF + '--' + form.getBoundary() + CRLF + 'X-Custom-Header: 123' + CRLF + CRLF,
  knownLength: 1
};

form.append('my_buffer', buffer, options);

form.submit('http://example.com/', function(err, res) {
  if (err) throw err;
  console.log('Done');
});
```

Form-Data kann alle erforderlichen Informationen aus häufig verwenden Typen von Datenströmen (```fs.readStream```, ```http.response```und ```mikeal's request```) erkennen und abrufen. Bei einigen anderen Typen von Datenströmen müssen Sie „file“-bezogene Informationen manuell angeben:

``` javascript
someModule.stream(function(err, stdout, stderr) {
  if (err) throw err;

  var form = new FormData();

  form.append('file', stdout, {
    filename: 'unicycle.jpg', // ... or:
    filepath: 'photos/toys/unicycle.jpg',
    contentType: 'image/jpeg',
    knownLength: 19806
  });

  form.submit('http://example.com/', function(err, res) {
    if (err) throw err;
    console.log('Done');
  });
});
```

Die Eigenschaft `filepath` setzt `filename` außer Kraft und enthält möglicherweise einen relativen Pfad. Dieser wird normalerweise beim Hochladen von [mehreren Dateien aus einem Verzeichnis](https://wicg.github.io/entries-api/#dom-htmlinputelement-webkitdirectory) verwendet.

Bei Edge-Fällen, z. B. einer POST-Anforderung an URL mit Abfragezeichenfolge oder der Übergabe von HTTP-Anmeldeinformationen zur Authentifizierung, kann das Objekt als erster Parameter an `form.submit()` übergeben werden:

``` javascript
form.submit({
  host: 'example.com',
  path: '/probably.php?extra=params',
  auth: 'username:password'
}, function(err, res) {
  console.log(res.statusCode);
});
```

Falls Sie mit der POST-Anforderung außerdem benutzerdefinierte HTTP-Header senden müssen, können Sie den Schlüssel `headers` im ersten Parameter von `form.submit()` verwenden:

``` javascript
form.submit({
  host: 'example.com',
  path: '/surelynot.php',
  headers: {'x-test-header': 'test-header-value'}
}, function(err, res) {
  console.log(res.statusCode);
});
```

### <a name="methods"></a>Methoden

- [_Void_ append (**String** _field_, **Mixed** _value_ [, **Mixed** _options_])](https://github.com/form-data/form-data#void-append-string-field-mixed-value--mixed-options-).
- [_Headers_ getHeaders ([**Headers** _userHeaders_])](https://github.com/form-data/form-data#array-getheaders-array-userheaders-)
- [_String_ getBoundary()](https://github.com/form-data/form-data#string-getboundary)
- [_Void_ setBoundary()](https://github.com/form-data/form-data#void-setboundary)
- [_Buffer_ getBuffer()](https://github.com/form-data/form-data#buffer-getbuffer)
- [_Integer_ getLengthSync()](https://github.com/form-data/form-data#integer-getlengthsync)
- [_Integer_ getLength (**function** _callback_)](https://github.com/form-data/form-data#integer-getlength-function-callback-)
- [_Boolean_ hasKnownLength()](https://github.com/form-data/form-data#boolean-hasknownlength)
- [_Request_ submit (_params_, **function** _callback_)](https://github.com/form-data/form-data#request-submit-params-function-callback-)
- [_String_ toString()](https://github.com/form-data/form-data#string-tostring)

#### <a name="_void_-append-string-_field_-mixed-_value_--mixed-_options_-"></a>_Void_ append (**String** _field_, **Mixed** _value_ [, **Mixed** _options_])
Fügen Sie Daten an das Formular an. Für die Übermittlung können Sie jedes beliebige Format („string“, „integer“, „boolean“, „buffer“ usw.) verwenden. Allerdings werden Arrays nicht unterstützt und müssen vom Benutzer in Zeichenfolgen umgewandelt werden.
```javascript
var form = new FormData();
form.append( 'my_string', 'my value' );
form.append( 'my_integer', 1 );
form.append( 'my_boolean', true );
form.append( 'my_buffer', new Buffer(10) );
form.append( 'my_array_as_json', JSON.stringify( ['bird','cute'] ) )
```

Sie können eine Zeichenfolge für Optionen oder ein Objekt angeben.
```javascript
// Set filename by providing a string for options
form.append( 'my_file', fs.createReadStream('/foo/bar.jpg'), 'bar.jpg' );

// provide an object.
form.append( 'my_file', fs.createReadStream('/foo/bar.jpg'), {filename: 'bar.jpg', contentType: 'image/jpeg', knownLength: 19806} );
```

#### <a name="_headers_-getheaders-headers-_userheaders_-"></a>_Headers_ getHeaders ([**Headers**_userHeaders_])
Diese Methode fügt dem bereitgestellten Array von `userHeaders` den richtigen `content-type`-Header hinzu.  

#### <a name="_string_-getboundary"></a>_String_ getBoundary()
Gibt die Grenze der Formulardaten (formData) zurück. Standardmäßig besteht die Grenze aus 26 `-`, gefolgt von 24 Ziffern, z. B.:
```javascript
--------------------------515890814546601021194782
```

#### <a name="_void_-setboundarystring-_boundary_"></a>_Void_ setBoundary (String _boundary_)
Legt die Begrenzungszeichenfolge fest, wodurch das oben beschriebene Standardverhalten außer Kraft gesetzt wird.

_Hinweis: Die Grenze muss eindeutig sein und darf in den Daten nicht angezeigt werden._

#### <a name="_buffer_-getbuffer"></a>_Buffer_ getBuffer()
Gibt das vollständige Formulardaten-Anforderungspaket als Puffer zurück. Sie können diesen Puffer z. B. in Axios einfügen, um mehrteilige Daten zu senden.
```javascript
var form = new FormData();
form.append( 'my_buffer', Buffer.from([0x4a,0x42,0x20,0x52,0x6f,0x63,0x6b,0x73]) );
form.append( 'my_file', fs.readFileSync('/foo/bar.jpg') );

axios.post( 'https://example.com/path/to/api',
            form.getBuffer(),
            form.getHeaders()
          )
```
**Hinweis:** Weil „Buffer“ der Typ der Ausgabe ist, können Sie nur Typen anfügen, die von „Buffer“ akzeptiert werden: *„string“, „Buffer“, „ArrayBuffer“, „Array“ oder „Array-like Object“* . Ein „ReadStream“ beispielsweise führt zu einem Fehler.

#### <a name="_integer_-getlengthsync"></a>_Integer_ getLengthSync()
Identisch mit `getLength`, aber synchron.

_Hinweis: „getLengthSync“ berechnet __nicht__ die Länge von Datenströmen._

#### <a name="_integer_-getlength-function-_callback_-"></a>_Integer_ getLength (**function** _callback_)
Gibt den Wert für `Content-Length` asynchron zurück. Der Rückruf wird verwendet, um Fehler zu behandeln und den Vorgang fortzusetzen, sobald die Länge berechnet wurde.
```javascript
this.getLength(function(err, length) {
  if (err) {
    this._error(err);
    return;
  }

  // add content length
  request.setHeader('Content-Length', length);

  ...
}.bind(this));
```

#### <a name="_boolean_-hasknownlength"></a>_Boolean_ hasKnownLength()
Überprüft, ob die Länge von hinzugefügten Werten bekannt ist.

#### <a name="_request_-submit-_params_-function-_callback_-"></a>_Request_ submit (_params_, **function** _callback_)
Übermittelt das Formular an eine Webanwendung.
```javascript
var form = new FormData();
form.append( 'my_string', 'Hello World' );

form.submit( 'http://example.com/', function(err, res) {
  // res – response object (http.IncomingMessage)  //
  res.resume();
} );
```

#### <a name="_string_-tostring"></a>_String_ toString ()
Gibt die Formulardaten als Zeichenfolge zurück. Verwenden Sie dies nicht, wenn Sie Dateien oder Puffer senden, sondern verwenden Sie stattdessen `getBuffer()`.

### <a name="integration-with-other-libraries"></a>Integration in andere Bibliotheken

#### <a name="request"></a>Anforderung

Formularübermittlung mithilfe von [request](https://github.com/request/request):

```javascript
var formData = {
  my_field: 'my_value',
  my_file: fs.createReadStream(__dirname + '/unicycle.jpg'),
};

request.post({url:'http://service.com/upload', formData: formData}, function(err, httpResponse, body) {
  if (err) {
    return console.error('upload failed:', err);
  }
  console.log('Upload successful!  Server responded with:', body);
});
```

Details dazu finden Sie in der Infodatei [request readme](https://github.com/request/request#multipartform-data-multipart-form-uploads).

#### <a name="node-fetch"></a>node-fetch

Sie können ein Formular auch mithilfe von [node-fetch](https://github.com/bitinn/node-fetch) übermitteln:

```javascript
var form = new FormData();

form.append('a', 1);

fetch('http://example.com', { method: 'POST', body: form })
    .then(function(res) {
        return res.json();
    }).then(function(json) {
        console.log(json);
    });
```

#### <a name="axios"></a>axios

In „Node.js“ können Sie eine Datei mit [Axios](https://github.com/axios/axios) veröffentlichen:
```javascript
const form = new FormData();
const stream = fs.createReadStream(PATH_TO_FILE);

form.append('image', stream);

// In Node.js environment you need to set boundary in the header field 'Content-Type' by calling method `getHeaders`
const formHeaders = form.getHeaders();

axios.post('http://example.com', form, {
  headers: {
    ...formHeaders,
  },
})
.then(response => response)
.catch(error => error)
```

## <a name="notes"></a>Notizen

- Die Methode ```getLengthSync()``` berechnet NICHT die Länge für Datenströme. Verwenden Sie die ```knownLength```-Optionen als Problemumgehung.
- Ab Version `2.x` wurde bei FormData die Unterstützung für `node@0.10.x` eingestellt.
- Ab Version `3.x` wurde bei FormData die Unterstützung für `node@4.x` eingestellt.

## <a name="license"></a>Lizenz

Form-Data wird unter der [MIT](License)-Lizenz veröffentlicht.
