---
ms.openlocfilehash: 841a4ef811cc186a2302309fbbc4a380d1ba5cbd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050944"
---
# <a name="tar-fs"></a>tar-fs

Dateisystembindungen für [tar-stream](https://github.com/mafintosh/tar-stream).

```
npm install tar-fs
```

[![Buildstatus](https://secure.travis-ci.org/mafintosh/tar-fs.png)](http://travis-ci.org/mafintosh/tar-fs)

## <a name="usage"></a>Verbrauch

tar-fs ermöglicht es Ihnen, Verzeichnisse in Tarballs zu packen und Tarballs in Verzeichnisse zu extrahieren.

Es komprimiert nicht mittels gunzip für Sie. Wenn Sie damit also ein `.tar.gz` extrahieren möchten, müssen Sie zusätzlich etwas wie [gunzip-maybe](https://github.com/mafintosh/gunzip-maybe) verwenden.

``` js
var tar = require('tar-fs')
var fs = require('fs')

// packing a directory
tar.pack('./my-directory').pipe(fs.createWriteStream('my-tarball.tar'))

// extracting a directory
fs.createReadStream('my-other-tarball.tar').pipe(tar.extract('./my-other-directory'))
```

Um verschiedene Dateien beim Packen oder Extrahieren zu ignorieren, fügen Sie der Optionen eine ignore-Funktion hinzu. `ignore` ist auch ein Alias für `filter`. Darüber hinaus erhalten Sie `header`, wenn Sie beim Extrahieren ignorieren.
Auf diese Weise können Sie auch nach Metadaten filtern.

``` js
var pack = tar.pack('./my-directory', {
  ignore: function(name) {
    return path.extname(name) === '.bin' // ignore .bin files when packing
  }
})

var extract = tar.extract('./my-other-directory', {
  ignore: function(name) {
    return path.extname(name) === '.bin' // ignore .bin files inside the tarball when extracing
  }
})

var extractFilesDirs = tar.extract('./my-other-other-directory', {
  ignore: function(_, header) {
    // pass files & directories, ignore e.g. symlinks
    return header.type !== 'file' && header.type !== 'directory'
  }
})
```

Sie können auch angeben, welche Einträge mit der `entries`-Option gepackt werden sollen.

```js
var pack = tar.pack('./my-directory', {
  entries: ['file1', 'subdir/file2'] // only the specific entries will be packed
})
```

Wenn Sie die Header beim Packen/Extrahieren ändern möchten, fügen Sie den Optionen eine map-Funktion hinzu.

``` js
var pack = tar.pack('./my-directory', {
  map: function(header) {
    header.name = 'prefixed/'+header.name
    return header
  }
})

var extract = tar.extract('./my-directory', {
  map: function(header) {
    header.name = 'another-prefix/'+header.name
    return header
  }
})
```

Ebenso können Sie `mapStream` verwenden, falls Sie die Eingabe-/Ausgabedatei-Datenströme ändern möchten.

``` js
var pack = tar.pack('./my-directory', {
  mapStream: function(fileStream, header) {
    // NOTE: the returned stream HAS to have the same length as the input stream.
    // If not make sure to update the size in the header passed in here.
    if (path.extname(header.name) === '.js') {
      return fileStream.pipe(someTransform)
    }
    return fileStream;
  }
})

var extract = tar.extract('./my-directory', {
  mapStream: function(fileStream, header) {
    if (path.extname(header.name) === '.js') {
      return fileStream.pipe(someTransform)
    }
    return fileStream;
  }
})
```

Legen Sie `options.fmode` und `options.dmode` fest, um sicherzustellen, dass extrahierte Dateien/Verzeichnisse die entsprechenden Modi aufweisen.

``` js
var extract = tar.extract('./my-directory', {
  dmode: parseInt(555, 8), // all dirs should be readable
  fmode: parseInt(444, 8) // all files should be readable
})
```

Es kann nützlich sein, `dmode` und `fmode` zu verwenden, wenn Sie Tarballs zwischen *nix/windows packen und entpacken, um sicherzustellen, dass alle entpackten Dateien/Verzeichnisse lesbar sind.

Alternativ können Sie `options.readable` und/oder `options.writable` festlegen, um den dmode und den fmode auf lesbar/schreibbar festzulegen.

``` js
var extract = tar.extract('./my-directory', {
  readable: true, // all dirs and files should be readable
  writable: true, // all dirs and files should be writable
})
```

Legen Sie `options.strict` auf `false` fest, wenn Fehler aufgrund nicht unterstützter Eingabetypen (z. B. Gerätedateien) ignoriert werden sollen.

Um Symlinks zu dereferenzieren (Packen des Inhalts des Symlinks anstelle des Links selbst), legen Sie `options.dereference` auf `true` fest.

## <a name="copy-a-directory"></a>Kopieren eines Verzeichnisses

Das Kopieren eines Verzeichnisses mit Berechtigungen und intakter mtime ist so einfach wie

``` js
tar.pack('source-directory').pipe(tar.extract('dest-directory'))
```

## <a name="interaction-with-tar-stream"></a>Interaktion mit [`tar-stream`](https://github.com/mafintosh/tar-stream)

Verwenden Sie `finalize: false` und den `finish`-Hook, um den Packstream für weitere Einträge geöffnet zu lassen (siehe [`tar-stream#pack`](https://github.com/mafintosh/tar-stream#packing)), und verwenden Sie `pack`, um einen vorhandenen Packstream zu übergeben.

``` js
var mypack = tar.pack('./my-directory', {
  finalize: false,
  finish: function(sameAsMypack) {
    mypack.entry({name: 'generated-file.txt'}, "hello")
    tar.pack('./other-directory', {
      pack: sameAsMypack
    })
  }
})
```


## <a name="performance"></a>Leistung

Das Packen und Extrahieren von 6,1 GB mit 2496 Verzeichnissen und 2398 Dateien liefert die folgenden Ergebnisse auf meinem Macbook Air.
[Hier finden Sie den Benchmark](https://gist.github.com/mafintosh/8102201)

* tar-fs: 34,261 Sekunden
* [node-tar](https://github.com/isaacs/node-tar): 366,123 Sekunden (oder 10x langsamer)

## <a name="license"></a>Lizenz

MIT
