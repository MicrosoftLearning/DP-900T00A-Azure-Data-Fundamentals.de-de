---
ms.openlocfilehash: 81fd1455668c9343defe69cbbbff10d48b1f97ef
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051912"
---
<a name="gauge"></a>Tachometerdiagramm
=====

Ein nahezu zustandsloses terminalbasiertes horizontales Messgerät mit Statusanzeige.

```javascript
var Gauge = require("gauge")

var gauge = new Gauge()

gauge.show("test", 0.20)

gauge.pulse("this")

gauge.hide()
```

![](gauge-demo.gif)


### <a name="changes-from-1x"></a>Änderungen gegenüber 1.x

Gauge 2.x ist ein Breaking Release. Lesen Sie das [Änderungsprotokoll], um zu erfahren, was sich geändert hat, wenn Sie dieses Modul zuvor genutzt haben.

[changelog]: CHANGELOG.md

### <a name="the-gauge-class"></a>Die Gauge-Klasse

Dies ist die typische Schnittstelle des Moduls, die eine einfach zu bedienende Schnittstelle zur Anzeige Ihrer Statusinformationen darstellt.

```
var Gauge = require("gauge")

var gauge = new Gauge([stream], [options])
```

* **stream**: *(optional, standardmäßig STDERR)* ein Datenstrom, in den Aktualisierungen der Statusanzeige geschrieben werden.  „Gauge“ beachtet den Rückstau und unterbricht die meisten Schreibvorgänge, sofern angegeben.
* **options**: *(optional)* ein Optionsobjekt.

Erstellt ein neues Messgerät. Messgeräte werden auf einer einzelnen Zeile gezeichnet und werden nicht gezeichnet, wenn **stream** kein TTY ist bzw. kein TTY explizit angegeben wird.

Wenn **stream** ein Terminal ist oder wenn Sie **tty** an **options** übergeben, werden Größenänderungen des Terminals erkannt und neu gezeichnet, um es anzupassen.  Wir tun dies, indem wir auf `resize`-Ereignisse auf dem TTY achten.  (Um einen Fehler in Versionen von Node vor 2.5.0 zu umgehen, achten wir auf solche Ereignisse an stdout, wenn das TTY stderr ist.) Die Größenanpassung an größere Fenster erfolgt problemlos, aber die Verkleinerung des Fensters führt stets zu einer gewissen Unordnung.

**WICHTIG:** Wenn Sie zuvor einen Nicht-TTY-Datenstrom übergeben haben, aber dennoch eine Ausgabe wünschen (z. B. einen Datenstrom, der vom Modul `ansi` umschlossen wurde), müssen Sie die nachstehende Option **tty** übergeben, da `gauge` Zugriff auf das zugrundeliegende TTY benötigt, um Aufgaben wie die Größenänderung des Terminals und Erkennung der Terminalbreite durchzuführen.

Das Objekt **options** kann die folgenden Eigenschaften haben, die alle optional sind:

* **updateInterval**: Die Häufigkeit, mit der Aktualisierungen des Messgeräts gezeichnet werden sollen, in Millisekunden.
* **fixedFramerate**: In node 0.8 ist der Standardwert FALSE, in allen anderen Versionen TRUE.  Falls TRUE, wird ein Timer erstellt, der alle `updateInterval` ms einen Trigger auslöst. Falls FALSE, werden Aktualisierungen ausgegeben, sobald sie eintreffen, aber Aktualisierungen, die häufiger als `updateInterval` erfolgen, werden ignoriert.  Der Grund dafür, dass dieses Feature in Version 0.8 nicht auf TRUE festgelegt ist, ist, dass es für seinen Timer nicht `unref` ausführen kann und somit Ihr Programm am Beenden hindern würde. Wenn Sie dieses Feature mit Version 0.8 verwenden möchten, stellen Sie einfach sicher, dass Sie `gauge.disable()` aufrufen, ehe Sie das Beenden Ihres Programms erwarten.
* **themes**: Ein Designsatz, der beim Auswählen des zu verwendenden Designs verwendet wird. Standardmäßig `gauge/themes`. Einzelheiten finden Sie in der Dokumentation unter [Themes].
* **theme**: Wählen Sie das gewünschte Design aus, das Folgendes sein kann:
  * Theme-Objekt, in diesem Fall wird **Themes** nicht verwendet.
  * Der Name eines Designs, das im aktuellen *Themes*-Objekt nachschlagen wird.
  * Ein Konfigurationsobjekt mit einem der Schlüssel `hasUnicode`, `hasColor` oder `platform`, das verwendet werden kann, um bei der Auswahl eines Standarddesigns auf unsere Vermutungen zu verzichten.

  Wenn Sie kein Design auswählen, wird ein Standarddesign ausgewählt, das eine Kombination aus unseren Vermutungen über Ihr Betriebssystem sowie Farb- und Unicode-Unterstützung abdeckt.
* **template**: Beschreibt, wie Ihr Messgerät aussehen soll.  Standardmäßig wird die Voreinstellung von npm verwendet.  Ausführliche [Dokumentation] finden Sie weiter unten in diesem Dokument.
* **hideCursor**: Standardmäßig TRUE.  Falls TRUE, wird der Cursor ausgeblendet, während das Messgerät angezeigt wird.
* **tty**: Das TTY, über das Daten ausgegeben werden sollen.  Die Standardeinstellung entspricht der von **stream**.  Dient zum Erkennen der Breite des Terminals und zur Größenänderung. Die verwendete Breite ist `tty.columns - 1`. Wenn kein TTY verfügbar ist, wird die Breite `79` angenommen.
* **enabled**: Standardwert ist TRUE, wenn `tty` ein TTY ist, andernfalls FALSE.  Falls TRUE, wird das Messgerät aktiviert gestartet.  Falls FALSE, werden alle Aktualisierungsbefehle ignoriert, und die Ausgabe des Messgeräts erfolgt erst, nachdem Sie `.enable()` aufgerufen haben.
* **Plumbing**: Die Klasse, mit der das Messgerät für die Ausgabe generiert wird.  Die Standardeinstellung ist `require('gauge/plumbing')`, und normalerweise sollten Sie diese nicht überschreiben müssen.
* **cleanupOnExit**: Standardmäßig TRUE. Normalerweise registrieren wir einen Exithandler, um sicherzustellen, dass Ihr Cursor wieder eingeschaltet und die Statusanzeige gelöscht wird, wenn Ihr Prozess beendet wird, auch wenn Sie STRG+C drücken oder auf andere Weise unerwartet beenden. Sie können dies deaktivieren, sodass der Exithandler nicht registriert wird.

[has-unicode]: https://www.npmjs.com/package/has-unicode
[themes]: #themes
[Dokumentation]: #templates

#### `gauge.show(section | status, [completed])`

Das erste Argument ist entweder der Abschnitt, der Name des aktuellen Elements, das zum Status beiträgt, oder ein Objekt mit Schlüsseln wie **section**, **subsection**,  & , **completed** (oder anderen, für die Sie Typen in einer benutzerdefinierten Vorlage haben).  Wenn Sie keine dieser Einstellungen aktualisieren oder festlegen möchten, können Sie `null` übergeben, und sie werden ignoriert.

Das zweite Argument ist der Prozentsatz, der als Wert von 0 bis 1 abgeschlossen wurde.
Ohne dieses wird der Abschluss einfach nicht aktualisiert. Sie werden auch feststellen, dass der Abschluss als Teil eines Statusobjekts als erstes Argument übergeben werden kann. Wenn sowohl dieses als auch das Argument „completed“ übergeben werden, hat das Argument „completed“ Vorrang.

#### `gauge.hide([cb])`

Entfernt das Messgerät aus dem Terminal.  Führen Sie optional einen Rückruf von `cb` durch, nachdem die E/A Gelegenheit hatte, zu erfolgen (derzeit bedeutet dies nur, dass `setImmediate` einen Rückruf durchgeführt hat).

Es hat sich herausgestellt, dass dies wichtig ist, wenn Sie die Statusanzeige in einem Dateihandle anhalten und in einem anderen Dateihandle ausgeben. Andernfalls kann es passieren, dass node (bei einer ausreichend großen Ausgabe) die Bits für das Ende der Statusanzeige in den Dateihandle der Statusanzeige ausgibt, während andere Daten in einem anderen Dateihandle ausgegeben werden. Wenn diese ineinander greifen, kann dies bei einigen Terminals zu Problemen führen.

#### `gauge.pulse([subsection])`

* **subsection**: *(optional)* Der spezifische Auslöser dieses Impulses

Dreht die Skala im Messgerät, um die Ausgabe anzuzeigen.  Wenn **subsection** enthalten ist, wird dieser mit dem letzten an `gauge.show` übergebenen Namen kombiniert.

#### `gauge.disable()`

Blendet das Messgerät aus und ignoriert weitere Aufrufe von `show` oder `pulse`.

#### `gauge.enable()`

Zeigt das Messgerät an und setzt die Aktualisierung fort, wenn `show` oder `pulse` aufgerufen wird.

#### `gauge.isEnabled()`

Gibt TRUE zurück, wenn das Messgerät aktiviert ist.

#### `gauge.setThemeset(themes)`

Ändern Sie den Designsatz, aus dem ein Design ausgewählt wird. Entspricht der im Konstruktor verwendeten Option `themes`. Das Design wird erneut in diesem Designsatz ausgewählt.

#### `gauge.setTheme(theme)`

Ändern Sie das aktive Design. Es wird mit der nächsten Anzeige oder dem nächsten Impuls angezeigt. Infrage kommt:

* Theme-Objekt, in diesem Fall wird **Themes** nicht verwendet.
* Der Name eines Designs, das im aktuellen *Themes*-Objekt nachschlagen wird.
* Ein Konfigurationsobjekt mit einem der Schlüssel `hasUnicode`, `hasColor` oder `platform`, das verwendet werden kann, um bei der Auswahl eines Standarddesigns auf unsere Vermutungen zu verzichten.

Wenn Sie kein Design auswählen, wird ein Standarddesign ausgewählt, das eine Kombination aus unseren Vermutungen über Ihr Betriebssystem sowie Farb- und Unicode-Unterstützung abdeckt.

#### `gauge.setTemplate(template)`

Ändern Sie das aktive Design. Es wird mit der nächsten Anzeige oder dem nächsten Impuls angezeigt.

### <a name="tracking-completion"></a>Nachverfolgung des Abschlusses

Wenn Sie mehr als einen Vorgang haben, dessen Abschluss Sie verfolgen möchten, können Sie das zugehörige [are-we-there-yet]-Element hilfreich finden.  Dessen `change`-Ereignis kann mit der `show`-Methode verbunden werden, um eine herkömmlichere Oberfläche für die Statusanzeige zu erhalten.

[are-we-there-yet]: https://www.npmjs.com/package/are-we-there-yet

### <a name="themes"></a>THEMES

```
var themes = require('gauge/themes')

// fetch the default color unicode theme for this platform
var ourTheme = themes({hasUnicode: true, hasColor: true})

// fetch the default non-color unicode theme for osx
var ourTheme = themes({hasUnicode: true, hasColor: false, platform: 'darwin'})

// create a new theme based on the color ascii theme for this platform
// that brackets the progress bar with arrows
var ourTheme = themes.newTheme(theme(hasUnicode: false, hasColor: true}), {
  preProgressbar: '→',
  postProgressbar: '←'
})
```

Das von `gauge/themes` zurückgegebene Objekt ist eine Instanz der `ThemeSet`-Klasse.

```
var ThemeSet = require('gauge/theme-set')
var themes = new ThemeSet()
// or
var themes = require('gauge/themes')
var mythemes = themes.newThemeset() // creates a new themeset based on the default themes
```

#### <a name="themesopts"></a>themes(opts)
#### <a name="themesgetdefaultopts"></a>themes.getDefault(opts)

Theme-Objekte sind eine Funktion, die das Standarddesign auf Grundlage von Plattform, Unicode und Farbunterstützung abruft.

„Options“ ist ein Objekt mit den folgenden Eigenschaften:

* **hasUnicode**: Falls TRUE, wird ein Unicode-Design abgerufen. Wenn kein Unicode-Design verfügbar ist, wird ein Nicht-Unicode-Design verwendet.
* **hasColor**: Falls TRUE, wird ein farbiges Design abgerufen. Wenn kein farbiges Design verfügbar ist, wird ein nicht farbiges Design verwendet.
* **platform** (optional): standardmäßig `process.platform`.  Wenn keine Plattformübereinstimmung verfügbar ist, wird stattdessen `fallback` verwendet.

Wenn kein kompatibles Design gefunden werden kann, wird ein `code` namens `EMISSINGTHEME` ausgelöst.

#### <a name="themesaddthemethemename-themeobj"></a>themes.addTheme(themeName, themeObj)
#### <a name="themesaddthemethemename-parenttheme-newtheme"></a>themes.addTheme(themeName, [parentTheme], newTheme)

Fügt dem Designsatz ein benanntes Design hinzu.  Sie können entweder ein Theme-Objekt übergeben, das von `themes.newTheme` zurückgegeben wird, oder die Argumente, die Sie an `themes.newTheme` übergeben würden.

#### <a name="themesgetthemenames"></a>themes.getThemeNames()

Gibt eine Liste aller Namen der Designs in diesem Designsatz zurück. Kann in `themes.getTheme(…)` verwendet werden.

#### <a name="themesgetthemename"></a>themes.getTheme(name)

Gibt das Designobjekt aus diesem Designsatz mit dem Namen `name` zurück.

Wenn `name` in diesem Designsatz nicht vorhanden ist, wird ein `code` namens `EMISSINGTHEME` ausgelöst.

#### <a name="themessetdefaultopts-themename"></a>themes.setDefault([opts], themeName)

`opts` ist ein Objekt mit den folgenden Eigenschaften.

* **platform**: standardmäßig `'fallback'`.  Wenn Ihr Design plattformspezifisch ist, geben Sie es hier mit der Plattform aus `process.platform` an, z. B. `win32`, `darwin`, usw.
* **hasUnicode**: standardmäßig `false`. Wenn Ihr Design Unicode verwendet, sollten Sie diese Option auf TRUE festlegen.
* **hasColor**: standardmäßig `false`.  Wenn Ihr Design eine Farbe verwendet, sollten Sie diese Option auf TRUE festlegen.

`themeName` ist der Name des Designs (wie in `addTheme` angegeben), das für diesen Satz von `opts` festgelegt wird.

#### <a name="themesnewthemeparenttheme-newtheme"></a>themes.newTheme([parentTheme,] newTheme)

Erstellen Sie ein neues Designobjekt basierend auf `parentTheme`.  Wenn kein `parentTheme` angegeben ist, wird ein minimales parentTheme definiert, das Funktionen für die Darstellung der Aktivitätsanzeige (Skala) und Statusanzeige definiert. (Dieses übergeordnete Fallbackelement wird in `gauge/base-theme` definiert.)

newTheme muss ein leeres Objekt sein. Wir beginnen mit den Eigenschaften, die von den Standarddesigns definiert werden:

* **preProgressbar**: wird vor der Statusanzeige angezeigt, wenn die Statusanzeige angezeigt wird.
* **postProgressbar**: wird nach der Statusanzeige angezeigt, wenn die Statusanzeige angezeigt wird.
* **progressBarTheme**: das Unterthema, das an den Renderer der Statusanzeige übergeben wird. Dabei handelt es sich um ein Objekt mit den Eigenschaften `complete` und `remaining`, bei denen es sich um die Zeichenfolgen handelt, die für diese Abschnitte der Statusanzeige wiederholt werden sollen.
* **activityIndicatorTheme**: das Design der Aktivitätsanzeige (Skala). Dies kann entweder eine Zeichenfolge sein, in der jedes Zeichen für einen anderen Schritt steht, oder ein Array von Zeichenfolgen.
* **preSubsection**: wird als Trennzeichen zwischen `section` und `subsection` angezeigt, wenn letzterer ausgegeben wird.

Ganz allgemein können Designs jeden Wert haben, der beim Rendern von Vorlagen ein gültig ist. Die Eigenschaften im Design werden verwendet, wenn ihr Name mit einem Typ in der Vorlage übereinstimmt. Ihre Werte wie folgt sein:

* **Zeichenfolgen und Zahlen**: Diese werden wie vorhanden einbezogen
* **function (values, theme, width)** : soll das zurückgeben, was Sie in Ihrer Ausgabe wünschen.
  *values* ist ein Objekt mit Werten, die über `gauge.show` bereitgestellt werden. *theme* ist das für dieses Element spezifische Design (siehe unten) oder dieses Designobjekt. Und *width* ist die Anzahl der Zeichen, die Ihr Ergebnis breit sein soll.

Es gibt ein paar spezielle Präfixe:

* **pre**: wird vor der Eigenschaft angezeigt, wenn sie angezeigt wird.
* **post**: wird nach der Eigenschaft angezeigt, wenn sie angezeigt wird.

Und ein spezielles Suffix:

* **Theme**: Sein Wert wird als Design an ein Element des Typs „Funktion“ übergeben.

#### <a name="themesaddtoallthemestheme"></a>themes.addToAllThemes(theme)

Hiermit wird `theme` in alle derzeit definierten Designs *eingebunden*. Außerdem wird es dem übergeordneten Standarddesign für diesen Designsatz hinzugefügt, sodass künftige Designs, die diesem Designsatz hinzugefügt werden, standardmäßig die Werte von `theme` erhalten.

#### <a name="themesnewthemeset"></a>themes.newThemeset()

Kopieren Sie den aktuellen Designsatz in einen neuen.  So können Sie einen Designsatz einfach von einem anderen erben.

### <a name="templates"></a>VORLAGEN

Eine Vorlage ist ein Array von Objekten und Zeichenfolgen, die nach der Auswertung in die Messgerätanzeige umgewandelt werden.  Die Standardvorlage ist wie folgt:

```javascript
[
    {type: 'progressbar', length: 20},
    {type: 'activityIndicator', kerning: 1, length: 1},
    {type: 'section', kerning: 1, default: ''},
    {type: 'subsection', kerning: 1, default: ''}
]
```

Die verschiedenen Vorlagenelemente können entweder **einfache Zeichenfolgen** sein (in diesem Fall werden sie wortwörtlich in die Ausgabe aufgenommen) oder Objekte mit den folgenden Eigenschaften:

* *type* kann einer der folgenden sein, zuzüglich aller Schlüssel, die Sie in `gauge.show` übergeben, sowie aller Schlüssel, die in einem benutzerdefinierten Design enthalten sind.
  * `section`: die große Aufgabe, an der Sie gerade arbeiten.
  * `subsection`: die Komponente der Aufgabe, an der Sie derzeit arbeiten.
  * `activityIndicator`: zeigt eine Skala unter Verwendung von `activityIndicatorTheme` in Ihrem aktiven Design.
  * `progressbar`: eine Statusanzeige, die Ihren aktuellen `completed`-Status unter Verwendung des `progressbarTheme` Ihres aktiven Designs darstellt.
* *kerning*: Anzahl der Leerzeichen, die zwischen diesem Element und anderen Elementen liegen müssen, wenn dieses Element überhaupt angezeigt wird.
* *maxLength*: die maximale Länge dieses Elements. Wenn der Wert länger ist, wird er abgeschnitten.
* *maxLength*: die minimale Länge dieses Elements. Wenn sein Wert kürzer ist, wird er entsprechend dem Wert für *align* aufgefüllt.
* *align*: (Standard: links) Mögliche Werte sind „left“, „right“ und „center“. Funktioniert wie in Textverarbeitungsprogrammen üblich.
* *length*: liefert einen einzelnen Wert für sowohl *minLength* als auch *maxLength*. Wenn sowohl *length* als auch *minLength oder *maxLength* angegeben sind, hat letzteres Vorrang.
* *value*: ein Literalwert, der für dieses Vorlagenelement verwendet wird.
* *default*: Ein Standardwert, der für dieses Vorlagenelement verwendet wird, wenn kein anderer Wert übergeben wurde.

### <a name="plumbing"></a>PLUMBING

Dies sind die supereinfachen, nichts voraussetzenden internen Elemente, die das Messgerät zur Implementierung seiner gewöhnlichen Oberfläche verwendet.

```
var Plumbing = require('gauge/plumbing')
var gauge = new Plumbing(theme, template, width)
```

* **theme**: Das zu verwendende Design.
* **template**: Die zu verwendende Vorlage.
* **width**: Die gewünschte Breite des Messgeräts.

#### `gauge.setTheme(theme)`

Ändert das aktive Design.

#### `gauge.setTemplate(template)`

Ändert die aktive Vorlage.

#### `gauge.setWidth(width)`

Ändert die zu rendernde Breite.

#### `gauge.hide()`

Gibt die Zeichenfolge zurück, die zum Ausblenden der Statusanzeige erforderlich ist

#### `gauge.hideCursor()`

Gibt eine Zeichenfolge zurück, um den Cursor auszublenden.

#### `gauge.showCursor()`

Gibt eine Zeichenfolge zurück, um den Cursor anzuzeigen.

#### `gauge.show(status)`

Rendert unter Verwendung von `status` für Werte die angegebene Vorlage mit dem Design und gibt eine Zeichenfolge zurück, die zum Ausgeben geeignet ist, um das Messgerät zu aktualisieren.
