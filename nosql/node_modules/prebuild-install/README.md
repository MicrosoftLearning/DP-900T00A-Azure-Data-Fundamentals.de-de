---
ms.openlocfilehash: 50690c00791b1f6ca1d585c1fb653f0ec4794578
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051704"
---
# <a name="prebuild-install"></a>prebuild-install

> **Ein Befehlszeilentool zum einfachen Installieren vordefinierter Binärdateien für mehrere Versionen von Node.js und Electron auf einer bestimmten Plattform.**
> Standardmäßig lädt es vordefinierte Binärdateien aus einer GitHub Version herunter.

[![npm](https://img.shields.io/npm/v/prebuild-install.svg)](https://www.npmjs.com/package/prebuild-install)
![Node-Version](https://img.shields.io/node/v/prebuild-install.svg)
[![Test](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml/badge.svg)](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml)
[![David](https://david-dm.org/prebuild/prebuild-install.svg)](https://david-dm.org/prebuild/prebuild-install)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com/)

## <a name="note"></a>Hinweis

**Statt [`prebuild`](https://github.com/prebuild/prebuild), gekoppelt mit [`prebuild-install`](https://github.com/prebuild/prebuild-install), empfehlen wir [`prebuildify`](https://github.com/prebuild/prebuildify), gekoppelt mit [`node-gyp-build`](https://github.com/prebuild/node-gyp-build).** .

Mit `prebuildify` werden alle vordefinierten Binärdateien innerhalb des Pakets geliefert, das in npm veröffentlicht wird. Dies bedeutet, dass kein separater Downloadschritt wie in `prebuild` erforderlich ist. Die Ironie dieses Ansatzes besteht darin, dass es schneller geht, alle vordefinierten Binärdateien für jede Plattform herunterzuladen, wenn sie gebündelt sind, als eine einzelne vordefinierte Binärdatei als Installationsskript herunterzuladen.

Vorteile:

1. Kein zusätzlicher Downloadschritt, wodurch eine zuverlässigere und schnellere Installation ermöglicht wird.
2. Unterstützt das lokale Ändern von Laufzeitversionen und die Verwendung derselben Installation zwischen Node.js und Electron. Eine Neuinstallation oder Neuerstellung ist nicht erforderlich, da sich alle vordefinierten Binärdateien im npm-Tarball befinden und die richtige Datei zur Laufzeit einfach ausgewählt wird.
3. Die Laufzeitabhängigkeit `node-gyp-build` ist abhängigkeitsfrei und bleibt so aus Prinzip, weil die Einführung von Abhängigkeiten die kürzere Installationszeit negieren würde.
4. Vordefinierte Binärdateien funktionieren selbst dann, wenn npm-Installationsskripts deaktiviert sind.
5. Die npm-Paketprüfsumme deckt auch vordefinierte Binärdateien ab.

Nachteile:

1. Das installierte npm-Paket ist auf dem Datenträger größer. Die Verwendung von [Node-API](https://nodejs.org/api/n-api.html) verringert dies, weil Node-API-Binärdateien laufzeitunabhängig und aufwärtskompatibel sind.
2. Die Veröffentlichung ist etwas komplizierter, weil `npm publish` nach dem Kompilieren und Abrufen vordefinierter Binärdateien (normalerweise in CI) erfolgen muss.

## <a name="usage"></a>Verbrauch

Verwenden Sie [`prebuild`](https://github.com/prebuild/prebuild) zum Erstellen und Hochladen von vordefinierten Binärdateien. Ändern Sie dann Ihr Installationsskript „package.json“ in:

```json
{
  "scripts": {
    "install": "prebuild-install || node-gyp rebuild"
  }
}
```

### <a name="help"></a>Hilfe

```
prebuild-install [options]

  --download    -d  [url]       (download prebuilds, no url means github)
  --target      -t  version     (version to install for)
  --runtime     -r  runtime     (Node runtime [node, napi or electron] to build or install for, default is node)
  --path        -p  path        (make a prebuild-install here)
  --token       -T  gh-token    (github token for private repos)
  --arch            arch        (target CPU architecture, see Node OS module docs, default is current arch)
  --platform        platform    (target platform, see Node OS module docs, default is current platform)
  --tag-prefix <prefix>         (github tag prefix, default is "v")
  --build-from-source           (skip prebuild download)
  --verbose                     (log verbosely)
  --libc                        (use provided libc rather than system default)
  --debug                       (set Debug or Release configuration)
  --version                     (print prebuild-install version and exit)
```

Wenn `prebuild-install` über ein `npm`-Skript ausgeführt wird, werden die Optionen `--build-from-source`, `--debug`, `--download`, `--target`, `--runtime`, `--arch` und `--platform` möglicherweise über Argumente durchgeleitet, die dem Befehl `npm` zugewiesen wurden.

Alternativ können Sie die Umgebungsvariablen `npm_config_build_from_source=true`, `npm_config_platform`, `npm_config_arch`, `npm_config_target` und `npm_config_runtime` festlegen.

### <a name="private-repositories"></a>Private Repositorys

`prebuild-install` unterstützt das Herunterladen von Vorabbuilds aus privaten GitHub Repositorys mithilfe des `-T <github-token>`:

```
$ prebuild-install -T <github-token>
```

Wenn Sie das Token nicht für „cli“ verwenden möchten, können Sie es in `~/.prebuild-installrc` einfügen:

```
token=<github-token>
```

Alternativ können Sie es in der Umgebungsvariablen `prebuild-install_token` angeben.

Beachten Sie, dass bei Verwendung eines GitHub-Tokens die API zum Auflösen der richtigen Version verwendet wird. Dies bedeutet, dass Sie der ([GitHub-Ratenbegrenzung](https://developer.github.com/v3/rate_limit/)) unterliegen.

### <a name="create-github-token"></a>Erstellen des GitHub Tokens

So erstellen Sie ein Token:

- Wechseln Sie zu [dieser Seite](https://github.com/settings/tokens).
- Klicken Sie auf die Schaltfläche `Generate new token`.
- Geben Sie dem Token einen Namen, und klicken Sie auf die Schaltfläche `Generate token`, siehe unten

![prebuild-token](https://cloud.githubusercontent.com/assets/13285808/20844584/d0b85268-b8c0-11e6-8b08-2b19522165a9.png)

Die Standardbereiche sollten geeignet sein.

### <a name="custom-binaries"></a>Benutzerdefinierte Binärdateien

Der Endbenutzer kann den binären Downloadspeicherort über Umgebungsvariablen in seiner NPMRC-Datei außer Kraft setzen.
Die Variable muss der Maske `% your package name %_binary_host` oder `% your package name %_binary_host_mirror` entsprechen. Zum Beispiel:

```
leveldown_binary_host=http://overriden-host.com/overriden-path
```

Beachten Sie, dass der Unterpfad und der Dateiname der Paketversion weiterhin angefügt werden.
Wenn Sie also `leveldown@1.2.3` installieren, lautet die resultierende URL so:

```
http://overriden-host.com/overriden-path/v1.2.3/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

#### <a name="local-prebuilds"></a>Lokale Vorabbuilds

Wenn Sie Vorabbuilds aus Ihrem lokalen Dateisystem verwenden möchten, können Sie mithilfe der NPMRC-Variablen `% your package name %_local_prebuilds` einen Pfad zu dem Ordner festlegen, der Vorabbuilds enthält. Beispiel:

```
leveldown_local_prebuilds=/path/to/prebuilds
```

Diese Option sucht direkt in diesem Ordner nach Bündeln, die mit `prebuild` erstellt wurden, beispielsweise:

```
/path/to/prebuilds/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

Nicht absolute Pfade werden relativ zum Verzeichnis des Pakets aufgelöst, das die Vorabbuild-Installation aufruft, z. B. für geschachtelte Abhängigkeiten.

### <a name="cache"></a>Cache

Alle vordefinierten Binärdateien werden zwischengespeichert, um den Datenverkehr zu minimieren. So wählt `prebuild-install` zuerst Binärdateien aus dem Cache aus, und wenn keine Binärdatei gefunden werden konnte, wird sie heruntergeladen. Je nach Umgebung wird der Cacheordner in dieser Reihenfolge festgelegt:

- `${npm_config_cache}/_prebuilds`
- `${APP_DATA}/npm-cache/_prebuilds`
- `${HOME}/.npm/_prebuilds`

## <a name="license"></a>Lizenz

MIT
