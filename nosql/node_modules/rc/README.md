---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051082"
---
# <a name="rc"></a>rc

Der nicht konfigurierbare Konfigurationsloader für Faule.

## <a name="usage"></a>Verbrauch

Die einzige Option besteht darin, den Namen Ihrer App sowie Ihre Standardkonfiguration an rc zu übergeben.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

`rc` gibt Ihre Konfigurationsoptionen zurück, die mit den von Ihnen angegebenen Standardeinstellungen zusammengeführt sind.
Wenn Sie ein vordefiniertes Standardobjekt übergeben, wird es mutiert:

```javascript
var conf = {};
require('rc')(appname, conf);
```

Wenn `rc` jegliche Konfigurationsdateien für Ihre App findet, verfügt das zurückgegebene Konfigurationsobjekt über ein `configs`-Array, das deren Pfade enthält:

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>Standards

Wenn Sie den Namen Ihrer Anwendung (`appname`) angeben, sucht rc an allen offensichtlichen Stellen nach einer Konfiguration.

  * Befehlszeilenargumente, analysiert von minimist _(z. B. `--foo baz`, auch geschachtelt: `--foo.bar=baz`)_
  * Umgebungsvariablen mit dem Präfix `${appname}_`
    * oder verwenden Sie „\_\_“, um geschachtelte Eigenschaften anzugeben <br/> _(z. B. `appname_foo__bar__baz` => `foo.bar.baz`)_
  * wenn Sie eine Option `--config file` übergeben haben, dann aus dieser Datei
  * eine lokale `.${appname}rc` oder die erste bei Suche in `./ ../ ../../ ../../../` gefundene usw.
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * das von Ihnen übergebene Standardobjekt.

Alle gefundenen Konfigurationsquellen werden zu einem Objekt vereinfacht, sodass Quellen, die in dieser Liste **weiter oben** stehen, weiter unten stehende außer Kraft setzen.


## <a name="configuration-file-formats"></a>Konfigurationsdateiformate

Konfigurationsdateien (z. B. `.appnamerc`) können im [json](http://json.org/example)- oder [ini](http://en.wikipedia.org/wiki/INI_file)-Format sein. Es sollte **keine** Dateierweiterung (`.json` oder `.ini`) verwendet werden. Die folgenden Beispielkonfigurationen entsprechen:


#### <a name="formatted-as-ini"></a>Formatiert als `ini`

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>Formatiert als `json`

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

Kommentare werden mittels [strip-json-comments](https://github.com/sindresorhus/strip-json-comments) aus der JSON-Konfiguration entfernt.

> Da ini- und env-Variablen keinen Standard für Typen aufweisen, muss Ihre Anwendung auf Zeichenfolgen vorbereitet sein.

Um sicherzustellen, dass Zeichenfolgendarstellungen von booleschen Werten und Zahlen immer in ihre geeigneten Typen konvertiert werden (insbesondere nützlich, wenn Sie beabsichtigen, strenge `===`-Vergleiche durchzuführen), sollten Sie ein Modul wie [parse-strings-in-object](https://github.com/anselanza/parse-strings-in-object) verwenden, um das von rc zurückgegebene Konfigurationsobjekt zu umschließen.


## <a name="simple-example-demonstrating-precedence"></a>Einfaches Beispiel zur Veranschaulichung der Rangfolge
Angenommen, Sie haben eine Anwendung wie diese (beachten Sie die an rc übergebenen, hartcodierten Standardeinstellungen):
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
Sie haben außerdem eine Datei `config.json` mit diesen Inhalten:
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
Sowie eine Datei `.myapprc` im selben Ordner mit diesen Inhalten:
```
{
  "port": "3001",
  "foo": "bar"
}
```
Hier sehen Sie die erwartete Ausgabe verschiedener Befehle:

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
Die *Standardeinstellungen`mode` aus dem hartcodierten Objekt bleiben erhalten, doch der Port wird von der `.myapprc`-Datei außer Kraft gesetzt (wird automatisch auf Grundlage der „appname“-Übereinstimmung gefunden), und `foo` wird hinzugefügt.*


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*Dasselbe Ergebnis wie oben, aber `foo` wird außer Kraft gesetzt, weil Befehlszeilenargumente Vorrang vor der `.myapprc`-Datei haben.*

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
*Jetzt stammt der `port` aus der angegebenen `config.json`-Datei (und setzt den Wert aus `.myapprc` außer Kraft), und der `foo`-Wert wird von der Befehlszeile außer Kraft gesetzt, obwohl er auch in der `config.json`-Datei angegeben ist.*
 


## <a name="advanced-usage"></a>Erweiterte Nutzung

#### <a name="pass-in-your-own-argv"></a>Übergeben Ihres eigenen `argv`

Sie können Ihr eigenes `argv` als drittes Argument an `rc` übergeben.  Dies ist für den Fall, dass Sie [Ihren eigenen Befehlszeilen-Optionenparser](https://github.com/dominictarr/rc/pull/12) verwenden möchten.

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>Übergeben Ihres eigenen Parsers

Wenn bei Ihnen eine spezielle Notwendigkeit für die Verwendung eines nicht standardmäßigen Parsers besteht, können Sie dies erreichen, indem Sie den Parser als 4. Argument übergeben.
(Lassen Sie das 3. Argument Null, um den Standardparser für Argumente zu verwenden.)

```javascript
require('rc')(appname, defaults, null, parser);
```

Dies kann auch verwendet werden, um ein strengeres Format wie strenges, reines, gültiges JSON zu erzwingen.

## <a name="note-on-performance"></a>Hinweis zur Leistung

`rc` führt `fs.statSync` aus. Stellen Sie daher sicher, dass Sie es nicht in einem heißen Codepfad (z. B. einen Anforderungshandler) verwenden. 


## <a name="license"></a>Lizenz

Mehrfach lizenziert unter der Zwei-Klausel BSD-Lizenz, MIT-Lizenz oder Apache-Lizenz, Version 2.0.
