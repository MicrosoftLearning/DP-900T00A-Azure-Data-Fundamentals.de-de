---
ms.openlocfilehash: ca1f677bd38876befee833fcedd10388a71aecf4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138053025"
---
<a name="agent-base"></a>agent-base
==========
### <a name="turn-a-function-into-an-httpagenthttpagent-instance"></a>Umwandeln einer Funktion in eine [`http.Agent`][http.Agent]-Instanz
[![Buildstatus](https://github.com/TooTallNate/node-agent-base/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-agent-base/actions?workflow=Node+CI)

Dieses Modul stellt einen `http.Agent`-Generator bereit. Das heißt, Sie übergeben ihm eine asynchrone Rückruffunktion, woraufhin er eine neue `http.Agent`-Instanz zurückgibt, die die angegebene Rückruffunktion beim Senden ausgehender HTTP-Anforderungen aufruft.

#### <a name="some-subclasses"></a>Einige Unterklassen:

Es folgen Sie einige weitere interessante Einsatzmöglichkeiten von `agent-base`.
Senden Sie einen Pull Request, um Ihren Eintrag aufzunehmen!

 * [`http-proxy-agent`][http-proxy-agent]: Eine `http.Agent`-Implementierung für HTTP(s)-Proxys für HTTP-Endpunkte
 * [`https-proxy-agent`][https-proxy-agent]: Eine `http.Agent`-Implementierung für HTTP(s)-Proxys für HTTPS-Endpunkte
 * [`pac-proxy-agent`][pac-proxy-agent]: Eine `http.Agent`-Implementierung für PAC-Dateiproxys für HTTP und HTTPS
 * [`socks-proxy-agent`][socks-proxy-agent]: Eine `http.Agent`-Implementierung für SOCKS-Proxys für HTTP und HTTPS


<a name="installation"></a>Installation
------------

Installation mit `npm`:

``` bash
$ npm install agent-base
```


<a name="example"></a>Beispiel
-------

Hier ist ein Minimalbeispiel, das für jede HTTP-Anforderung eine neue `net.Socket`-Verbindung mit dem Server herstellt (d. h. das Äquivalent zur Option `agent: false`):

```js
var net = require('net');
var tls = require('tls');
var url = require('url');
var http = require('http');
var agent = require('agent-base');

var endpoint = 'http://nodejs.org/api/';
var parsed = url.parse(endpoint);

// This is the important part!
parsed.agent = agent(function (req, opts) {
  var socket;
  // `secureEndpoint` is true when using the https module
  if (opts.secureEndpoint) {
    socket = tls.connect(opts);
  } else {
    socket = net.connect(opts);
  }
  return socket;
});

// Everything else works just like normal...
http.get(parsed, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

Das Zurückgeben eines Promise oder die Verwendung einer `async`-Funktion wird ebenfalls unterstützt:

```js
agent(async function (req, opts) {
  await sleep(1000);
  // etc…
});
```

Geben Sie eine weitere `http.Agent`-Instanz zurück, um die Zuständigkeit für diese HTTP-Anforderung an diesen Agent zu übergeben:

```js
agent(function (req, opts) {
  return opts.secureEndpoint ? https.globalAgent : http.globalAgent;
});
```


<a name="api"></a>API
---

## <a name="agentfunction-callback-object-options--httpagent"></a>Agent(Function callback[, Object options]) → [http.Agent][]

Erstellt einen grundlegenden `http.Agent`, der die Rückruffunktion `callback` für jede HTTP-Anforderung ausführt, für die er als `agent` verwendet wird. Die Rückruffunktion ist für die Erstellung einer `stream.Duplex`-Instanz zuständig, die als zugrunde liegende Socket für die HTTP-Anforderung verwendet wird.

Das `options`-Objekt akzeptiert die folgenden Eigenschaften:

  * `timeout`: Zahl: Timeout für die `callback()`-Funktion in Millisekunden. Standardeinstellung ist „Infinity“ (optional).

Die Rückruffunktion sollte die folgende Signatur aufweisen:

### <a name="callbackhttpclientrequest-req-object-options-function-cb--undefined"></a>callback(http.ClientRequest req, Object options, Function cb) → undefined

Auf die ClientRequest `req` kann zugegriffen werden, um Anforderungsheader und den Pfad usw. zu lesen. Das Objekt `options` enthält die Optionen, die an den Funktionsaufruf `http.request()`/`https.request()` übergeben wurden, und ist so formatiert, dass es direkt an `net.connect()`/`tls.connect()` oder (wie auch immer Sie eine Socket erstellt haben möchten) übergeben werden kann. Übergeben Sie die erstellte Socket an die Rückruffunktion `cb`, sobald diese erstellt wurde, woraufhin die HTTP-Anforderung fortgeführt wird.

Wenn das Modul `https` zum Aufrufen der HTTP-Anforderung verwendet wird, dann wird die `secureEndpoint`-Eigenschaft für `options` auf _`true`festgelegt_.


<a name="license"></a>Lizenz
-------

(Die MIT-Lizenz)

Copyright (c) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

Hiermit wird jeder Person, die eine Kopie dieser Software und der zugehörigen Dokumentationsdateien (die „Software“) erhält, kostenlos die Erlaubnis erteilt, die Software uneingeschränkt zu verwenden, einschließlich, aber nicht beschränkt auf die Rechte zur Nutzung, Vervielfältigung, Änderung, Zusammenführung, Veröffentlichung, Verteilung, Unterlizenzierung und/oder zum Verkauf von Kopien der Software, und Personen, denen die Software zur Verfügung gestellt wird, dies unter den folgenden Bedingungen zu gestatten:

Der obige Urheberrechtshinweis und dieser Berechtigungshinweis sind in allen Kopien oder wesentlichen Teilen der Software enthalten.

DIE SOFTWARE WIRD „WIE BESEHEN“ OHNE JEGLICHE GEWÄHRLEISTUNG, WEDER AUSDRÜCKLICH NOCH KONKLUDENT, ZUR VERFÜGUNG GESTELLT, EINSCHLIESSLICH, ABER NICHT BESCHRÄNKT AUF GEWÄHRLEISTUNGEN DER HANDELSÜBLICHKEIT, EIGNUNG FÜR EINEN BESTIMMTEN ZWECK UND NICHTVERLETZUNG VON RECHTEN DRITTER.
IN KEINEM FALL SIND DIE AUTOREN ODER URHEBERRECHTSINHABER HAFTBAR FÜR ANSPRÜCHE, SCHÄDEN ODER ANDERE HAFTUNGEN, SEI ES AUS EINER VERTRAGSHANDLUNG, UNERLAUBTER HANDLUNG ODER ANDERWEITIG, DIE SICH AUS ODER IN VERBINDUNG MIT DER SOFTWARE ODER DER NUTZUNG ANDERER VERFAHREN IN DER SOFTWARE ERGEBEN.

[http-proxy-agent]: https://github.com/TooTallNate/node-http-proxy-agent
[https-proxy-agent]: https://github.com/TooTallNate/node-https-proxy-agent
[pac-proxy-agent]: https://github.com/TooTallNate/node-pac-proxy-agent
[socks-proxy-agent]: https://github.com/TooTallNate/node-socks-proxy-agent
[http.Agent]: https://nodejs.org/api/http.html#http_class_http_agent
