---
ms.openlocfilehash: 6aae1c88465791540ed5192f26e8f48b83eb2b47
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051472"
---
# <a name="node-jwa-build-statushttpstravis-ciorgbrianloveswordsnode-jwa"></a>node-jwa [![Buildstatus](https://travis-ci.org/brianloveswords/node-jwa.svg?branch=master)](https://travis-ci.org/brianloveswords/node-jwa)

Eine Implementierung von [JSON-Webalgorithmen](http://tools.ietf.org/id/draft-ietf-jose-json-web-algorithms-08.html), die sich (an diesem Punkt ausschließlich) auf die Algorithmen konzentriert, die für [JSON-Websignaturen](http://self-issued.info/docs/draft-ietf-jose-json-web-signature.html) erforderlich sind.

Diese Bibliothek unterstützt alle erforderlichen, empfohlenen und optionalen Kryptografiealgorithmen für JWS:

alg-Parameterwert | Digitaler Signatur- oder MAC-Algorithmus
----------------|----------------------------
HS256 | HMAC mit dem SHA-256-Hashalgorithmus
HS384 | HMAC mit dem SHA-384-Hashalgorithmus
HS512 | HMAC mit dem SHA-512-Hashalgorithmus
RS256 | RSASSA mit dem SHA-256-Hashalgorithmus
RS384 | RSASSA mit dem SHA-384-Hashalgorithmus
RS512 | RSASSA mit dem SHA-512-Hashalgorithmus
PS256 | RSASSA-PSS mit dem SHA-256-Hashalgorithmus
PS384 | RSASSA-PSS mit dem SHA-384-Hashalgorithmus
PS512 | RSASSA-PSS mit dem SHA-512-Hashalgorithmus
ES256 | ECDSA mit P-256-Kurve und SHA-256-Hashalgorithmus
ES384 | ECDSA mit P-384-Kurve und SHA-384-Hashalgorithmus
ES512 | ECDSA mit P-512-Kurve und SHA-521-Hashalgorithmus
Keine | Kein digitaler Signatur- oder MAC-Wert enthalten

Beachten Sie, dass PS* nur mit Node 6.12+ funktioniert (ohne 7.x).

# <a name="requirements"></a>Requirements (Anforderungen)

Um die Tests auszuführen, ist eine aktuelle Version von OpenSSL erforderlich. **Die Version, die mit OS X ausgeliefert wird (OpenSSL 0.9.8r 8 Feb)
2011) ist nicht aktuell genug**, da sie ECDSA-Schlüssel nicht vollständig unterstützt. Sie müssen eine Version > 1.0.0 verwenden. Ich habe mit OpenSSL 1.0.1c 10 May 2012 getestet.

# <a name="testing"></a>Testen

Gehen Sie wie folgt vor, um die Tests auszuführen

```bash
$ npm test
```

Dadurch wird eine Reihe von Schlüsselpaaren generiert, die bei Tests verwendet werden können. Wenn Sie neue Schlüsselpaare generieren möchten, führen Sie `make clean` vor dem erneuten Ausführen von `npm test` aus.

## <a name="methodology"></a>Methodik

Ich erzeuge `openssl dgst -sign`, um OpenSSL-Signierung zu testen → JS-Überprüfung und `openssl dgst -verify`, um JS-Signierung zu testen → OpenSSL-Überprüfung für jeden der RSA- und ECDSA-Algorithmen.

# <a name="usage"></a>Verbrauch

## <a name="jwaalgorithm"></a>jwa(algorithm)

Erstellt ein neues `jwa`-Objekt mit den Methoden `sign` und `verify` für den Algorithmus. Gültige Werte für „algorithm“ finden Sie in der obigen Tabelle (`'HS256'`, `'HS384'`usw.). Die Werte beachten Groß-/Kleinschreibung nicht. Durch das Übergeben eines ungültigen „algorithm“-Werts wird ein `TypeError` ausgelöst.


## <a name="jwasigninput-secretorprivatekey"></a>jwa#sign(input, secretOrPrivateKey)

Signieren Sie eine Eingabe mit einem Geheimnis für HMAC-Algorithmen oder einem privaten Schlüssel für RSA- und ECDSA-Algorithmen.

Wenn die Eingabe nicht bereits eine Zeichenfolge oder ein Puffer ist, wird `JSON.stringify` dafür aufgerufen, um dies zu erzwingen.

Für den HMAC-Algorithmus sollte `secretOrPrivateKey` eine Zeichenfolge oder ein Puffer sein. Für ECDSA und RSA sollte der Wert eine Zeichenfolge sein, die einen PEM-codierten **privaten** Schlüssel darstellt.

Ausgabe [base64url](http://en.wikipedia.org/wiki/Base64#URL_applications)-formatiert. Dies dient der Bequemlichkeit, da JWS die Signatur in diesem Format erwartet. Wenn Ihre Anwendung die Ausgabe in einem anderen Format benötigt, [öffnen Sie ein Issue](https://github.com/brianloveswords/node-jwa/issues). In der Zwischenzeit können Sie [brianloveswords/base64url](https://github.com/brianloveswords/base64url) verwenden, um die Signatur zu decodieren.

Mit nodejs *v0.11.8* wurde die SPKAC-Unterstützung eingeführt. Wenn Ihre nodeJs-Version dies erfüllt, können Sie ein Objekt übergeben: `{ key: '..', passphrase: '...' }`


## <a name="jwaverifyinput-signature-secretorpublickey"></a>jwa#verify(input, signature, secretOrPublicKey)

Überprüfen Sie eine Signatur. Gibt einen `true` oder `false` zurück.

`signature` sollte eine base64url-codierte Zeichenfolge sein.

Für den HMAC-Algorithmus sollte `secretOrPublicKey` eine Zeichenfolge oder ein Puffer sein. Für ECDSA und RSA sollte der Wert eine Zeichenfolge sein, die einen PEM-codierten **privaten** Schlüssel darstellt.


# <a name="example"></a>Beispiel

HMAC
```js
const jwa = require('jwa');

const hmac = jwa('HS256');
const input = 'super important stuff';
const secret = 'shhhhhh';

const signature = hmac.sign(input, secret);
hmac.verify(input, signature, secret) // === true
hmac.verify(input, signature, 'trickery!') // === false
```

Mit Schlüsseln
```js
const fs = require('fs');
const jwa = require('jwa');
const privateKey = fs.readFileSync(__dirname + '/ecdsa-p521-private.pem');
const publicKey = fs.readFileSync(__dirname + '/ecdsa-p521-public.pem');

const ecdsa = jwa('ES512');
const input = 'very important stuff';

const signature = ecdsa.sign(input, privateKey);
ecdsa.verify(input, signature, publicKey) // === true
```
## <a name="license"></a>Lizenz

MIT

```
Copyright (c) 2013 Brian J. Brennan

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```
