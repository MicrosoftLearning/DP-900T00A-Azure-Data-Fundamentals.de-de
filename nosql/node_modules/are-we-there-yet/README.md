---
ms.openlocfilehash: 34b661fbb1237d51bdab932626d19518225841a0
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051959"
---
<a name="are-we-there-yet"></a>are-we-there-yet
----------------

Verfolgen Sie komplexe Hierarchien asynchroner Aufgabenabschlussstatus nach.  Dies soll Ihnen eine Möglichkeit geben, den Status der großen rekursiven Workflows zum Auffächern und Sammeln aufzuzeichnen und zu melden, die in so häufig asynchron vorkommen.

Was Sie mit diesen Aufgabenabschlussdaten machen, bleibt Ihnen überlassen, aber der häufigste Anwendungsfall ist die Weitergabe an eines der vielen Statusanzeigemodule.

Die meisten Statusanzeigemodule enthalten eine rudimentäre Version davon, aber meine Bedürfnisse waren komplexer.

<a name="usage"></a>Verbrauch
=====

```javascript
var TrackerGroup = require("are-we-there-yet").TrackerGroup

var top = new TrackerGroup("program")

var single = top.newItem("one thing", 100)
single.completeWork(20)

console.log(top.completed()) // 0.2

fs.stat("file", function(er, stat) {
  if (er) throw er  
  var stream = top.newStream("file", stat.size)
  console.log(top.completed()) // now 0.1 as single is 50% of the job and is 20% complete
                              // and 50% * 20% == 10%
  fs.createReadStream("file").pipe(stream).on("data", function (chunk) {
    // do stuff with chunk
  })
  top.on("change", function (name) {
    // called each time a chunk is read from "file"
    // top.completed() will start at 0.1 and fill up to 0.6 as the file is read
  })
})
```

<a name="shared-methods"></a>Freigegebene Methoden
==============

* var completed = tracker.completed()

Implementiert in:`Tracker`, `TrackerGroup`, `TrackerStream`

Gibt das Verhältnis der abgeschlossenen Aufgaben zurück, die ausgeführt werden sollen. Bereich von 0 bis 1.

* tracker.finish()

Implementiert in:`Tracker`, `TrackerGroup`

Markiert den Tracker als abgeschlossen. Bei einer TrackerGroup werden hiermit alle ihre Komponenten als abgeschlossen markiert.

Markiert alle Komponenten dieses Trackers als abgeschlossen, was wiederum bedeutet, dass `tracker.completed()` für diesen Tracker nun 1 ist.

Dies führt dazu, dass ein oder mehrere `change`-Ereignisse ausgegeben werden.

<a name="events"></a>Events
======

Alle Trackerobjekte geben `change`-Ereignisse mit den folgenden Argumenten aus:

```
function (name, completed, tracker)
```

`name` ist der Name des Trackers, der das Ereignis ursprünglich ausgegeben hat, oder wenn er keinen hatte, die erste Trackergruppe, die einen hatte.

`completed` ist der prozentuale Abschluss (wie von der `tracker.completed()`-Methode zurückgegeben).

`tracker` ist das Trackerobjekt, bei dem Sie auf Ereignisse lauschen.

<a name="trackergroup"></a>TrackerGroup
============

* var tracker = new TrackerGroup(**name**)

  * **name** *(optional)* : Der Name dieser Trackergruppe, der in Änderungsbenachrichtigungen angezeigt wird, wenn die zu aktualisierende Komponente noch keinen Namen hat. Die Standardeinstellung ist „undefined“.

Erstellt eine neue leere Aggregationsgruppe für den Tracker. Dies sind Tracker, deren Abschlussstatus durch den Abschlussstatus anderer Tracker bestimmt wird.

* tracker.addUnit(**otherTracker**, **weight**)

  * **otherTracker**: ein beliebiges der anderen Are-We-There-Yet-Trackerobjekte
  * **weight** *(optional)* : Die Gewichtung, die der Tracker erhalten soll. Standardwert 1.

Fügt **otherTracker** der Aggregationsgruppe hinzu. Die Gewichtung legt fest, wie lange dieser Tracker im Verhältnis zu anderen Einheiten voraussichtlich bis zum Abschluss benötigt.  Wenn Sie also beispielsweise einen Tracker mit der Gewichtung 1 und einen anderen mit der Gewichtung 2 hinzufügen, bedeutet dies, dass der zweite doppelt so lange bis zum Abschluss braucht wie der erste.  Der erste macht also 33 % des Abschlusses dieses Trackers aus, der zweite die restlichen 67 %.

Gibt **otherTracker** zurück.

* var subGroup = tracker.newGroup(**name**, **weight**)

Das obige Beispiel entspricht Folgendem:

```javascript
  var subGroup = tracker.addUnit(new TrackerGroup(name), weight)
```

* var subItem = tracker.newItem(**name**, **todo**, **weight**)

Das obige Beispiel entspricht Folgendem:

```javascript
  var subItem = tracker.addUnit(new Tracker(name, todo), weight)
```

* var subStream = tracker.newStream(**name**, **todo**, **weight**)

Das obige Beispiel entspricht Folgendem:

```javascript
  var subStream = tracker.addUnit(new TrackerStream(name, todo), weight)
```

* console.log( tracker.debug() )

Gibt eine Struktur zurück, die den Aufgabenabschluss dieser Trackergruppe und aller ihrer untergeordneten Gruppen zeigt, einschließlich der rekursiven Eingabe aller untergeordneten Gruppen.

<a name="tracker"></a>Tracker
=======

* var tracker = new Tracker(**name**, **todo**)

  * **name** *(optional)* Der Name dieses Zählers, der bei Änderungsereignissen gemeldet wird.  Die Standardeinstellung ist „undefined“.
  * **todo** *(optional)* Der Umfang der zu erledigenden Aufgaben (eine Zahl). Der Standardwert ist 0.

Normalerweise werden diese als Teil einer Trackergruppe (über `newItem`) erstellt.

* var completed = tracker.completed()

Gibt das Verhältnis der abgeschlossenen Aufgaben zurück, die ausgeführt werden sollen. Bereich von 0 bis 1. Wenn die zu erledigenden Aufgaben insgesamt 0 sind, wird 0 zurückgegeben.

* tracker.addWork(**todo**)

  * **todo** Eine Zahl zum Hinzufügen des Umfangs der zu erledigenden Aufgaben.

Erhöht den Umfang der zu erledigenden Aufgaben und verringert damit den Prozentsatz des Aufgabenabschlusses.  Löst ein `change`-Ereignis aus.

* tracker.completeWork(**completed**)

  * **completed** Eine Ziffer, die den zu erledigenden Aufgaben hinzugefügt wird

Erhöhen Sie den Umfang der abgeschlossenen Aufgaben, um den Prozentsatz der abgeschlossenen Aufgaben zu erhöhen.
Zu keinem Zeitpunkt dürfen die erledigten Aufgaben über den Umfang der zu erledigenden Aufgaben hinausgehen. Das heißt, Prozentsätze > 100 % sind nicht erlaubt. Löst ein `change`-Ereignis aus.

* tracker.finish()

Markiert diesen Tracker als abgeschlossen. tracker.completed() ist jetzt 1. Löst ein `change`-Ereignis aus.

<a name="trackerstream"></a>TrackerStream
=============

* var tracker = new TrackerStream(**name**, **size**, **options**)

  * **name** *(optional)* Der Name dieses Zählers, der bei Änderungsereignissen gemeldet wird.  Die Standardeinstellung ist „undefined“.
  * **size** *(optional)* Die Anzahl der Bytes, die über diesen Datenstrom gesendet werden.
  * **options** *(optional)* Ein Hash von Datenstromoptionen

Das Datenstromobjekt des Trackers ist ein Pass-Through-Datenstrom, der ein internes Datenstromobjekt jedes Mal aktualisiert, wenn ein Block durchläuft.  Es dient zum Nachverfolgen von Downloads, Dateiextraktionen und anderen verwandten Aktivitäten. Sie verwenden es, indem Sie Ihre Datenquelle über eine Pipe einbinden und sie dann als Ihre Datenquelle verwenden.

Wenn Ihre Daten ein Längenattribut haben, wird dieses als Umfang der abgeschlossenen Aufgaben beim Durchlauf des Blocks verwendet.  Wenn dies nicht der Fall ist (z. B. bei Objektdatenströmen), zählt jeder Block als Abschluss einer Aufgabeneinheit, sodass Ihre Größe der Gesamtanzahl der gestreamten Objekte entsprechen sollte.

* tracker.addWork(**todo**)

  * **todo** Erhöht die erwartete Gesamtgröße um **todo** Bytes.

Erhöht den Umfang der zu erledigenden Aufgaben und verringert damit den Prozentsatz des Aufgabenabschlusses.  Löst ein `change`-Ereignis aus.
